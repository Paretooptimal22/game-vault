<div class="container">
  <h1 class="text-center">Rentals</h1>
  <main class="row row-cols-2">
    <div class="listings-container col-6">
      <h2 class="text-center">My Pending Listings</h2>
      <ul class="list-group">
      <% @rentals_as_owner.reverse.each do |rental| %>
        <li class="d-flex justify-content-between list-group-item">
          <div class="list-left">
            <%= rental.listing.game.name %>
          </div>
          <div class="list-right d-flex">
          <% if rental.pending? %>
            <%= simple_form_for rental, method: :patch do |f| %>
              <%= f.input :status, as: :hidden, input_html: { value: 'approved'} %>
              <%= f.submit 'Accept', class: 'btn btn-success' %>
            <% end %>
            <%= simple_form_for rental, method: :patch do |f| %>
              <%= f.input :status, as: :hidden, input_html: { value: 'rejected'} %>
              <%= f.submit 'Reject', class: 'btn btn-danger' %>
            <% end %>
          <% else %>
            <p class='bg-info p-1'><%= rental.status %></p>
          </div>
        <% end %>
        </li>
        <% end %>
      </ul>
    </div>
    <div class="rentals-container col-6">
      <h2 class="text-center">My Ongoing Rentals</h2>
      <ul class="list-group">
        <% @rentals.reverse.each do |rental| %>
          <li class="d-flex justify-content-between list-group-item">
            <div class="list-left">
              <strong>Due:</strong> <%= rental.end_date %>
              <strong>Rental days:</strong> <%= ((rental.end_date - rental.start_date).to_i) +1%>
              <strong>Total:</strong> <%= number_to_currency(((((rental.end_date - rental.start_date).to_i) +1)*rental.listing.price) , { unit: 'Â¥', precision: 0 }) %>

            </div>
            <div class="list-right">
              <%= link_to rental.listing.game.name, listing_path(rental.listing) %>
            </div>
          </li>
        <% end %>
      </ul>
    </div>
  </main>
</div>
